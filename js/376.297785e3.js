"use strict";(self["webpackChunktitan2"]=self["webpackChunktitan2"]||[]).push([[376],{2637:function(t,l,e){e.d(l,{Z:function(){return D}});var a=e(6252),i=e(3577);const s=t=>((0,a.dD)("data-v-dd07b02c"),t=t(),(0,a.Cn)(),t),o={class:"search"},r=(0,a.Uk)("查询"),n={class:"list"},d=["onClick"],u={class:"itemInner"},c={class:"itemTitle"},p={class:"itemInner"},g=s((()=>(0,a._)("p",null,null,-1))),m={class:"itemInner btm"},w={key:0,class:"foot"};function h(t,l,e,s,h,_){const k=(0,a.up)("el-input"),v=(0,a.up)("el-button"),y=(0,a.up)("el-empty"),A=(0,a.up)("PlantCropsDetailCDialogDetail"),D=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(D,{modelValue:h.dialogVisible,"onUpdate:modelValue":l[1]||(l[1]=t=>h.dialogVisible=t),title:e.title,width:"30%","before-close":_.handleClose,"append-to-body":""},{default:(0,a.w5)((()=>[(0,a._)("div",o,[(0,a.Wm)(k,{modelValue:h.searchKey,"onUpdate:modelValue":l[0]||(l[0]=t=>h.searchKey=t),placeholder:"关键字搜索：农事类型、农资、备注"},null,8,["modelValue"]),(0,a.Wm)(v,{type:"primary",style:{"margin-left":"15px"},plain:"",onClick:_.getData},{default:(0,a.w5)((()=>[r])),_:1},8,["onClick"])]),(0,a._)("div",n,[0==h.list.length?((0,a.wg)(),(0,a.j4)(y,{key:0,description:"暂无数据"})):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(h.list,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"item",key:t.id,style:(0,i.j5)({cursor:"农资使用统计"==e.title?"pointer":""}),onClick:l=>_.detail(t.id)},[(0,a._)("div",u,[(0,a._)("p",c,(0,i.zw)(t.title),1),(0,a._)("p",null,(0,i.zw)(t.workTime),1)]),(0,a._)("div",p,[(0,a._)("p",null,"备注："+(0,i.zw)(t.workText),1),g]),(0,a._)("div",m,[(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.farmUseBos,(t=>((0,a.wg)(),(0,a.iD)("p",{key:t.id},[(0,a._)("span",null,(0,i.zw)(t.agricultural),1),(0,a._)("span",null,(0,i.zw)(t.agriculturalCount)+(0,i.zw)(t.agriculturalUnit),1)])))),128))]),(0,a._)("p",null,(0,i.zw)(t.userName),1)]),"工时使用统计"==e.title?((0,a.wg)(),(0,a.iD)("div",w,(0,i.zw)(t.workHour)+"工时",1)):(0,a.kq)("",!0)],12,d)))),128))]),h.showDetail?((0,a.wg)(),(0,a.j4)(A,{key:0,title:h.detailTitle,id:h.detailId,onClose:_.closeDetail},null,8,["title","id","onClose"])):(0,a.kq)("",!0)])),_:1},8,["modelValue","title","before-close"])}var _=e(2335),k=e(5320),v={props:["title","id","title2"],data(){return{dialogVisible:!0,searchKey:"",list:[],showDetail:!1,detailTitle:"",detailId:""}},mounted(){this.getData()},components:{PlantCropsDetailCDialogDetail:k.Z},methods:{handleClose(){this.dialogVisible=!1,this.$emit("close")},detail(t){"农资使用统计"==this.title&&(this.detailTitle="施肥详情",this.showDetail=!0,this.detailId=t,console.log(t))},closeDetail(){setTimeout((()=>{this.showDetail=!1}),300)},getData(){let t={},l="";"农资使用统计"==this.title?(t={agriculturalId:this.id,endTime:"",keyWord:this.searchKey,plantsId:this.$route.query.id,startTime:""},l="/api/v1/adam/farm/getFarmRecordByAgriculturalId"):(t={title:this.title2,endTime:"",farmId:this.id||1,keyWord:this.searchKey,plantsId:this.$route.query.id,startTime:""},l="/api/v1/adam/farm/getFarmWorkRecordByFarmId"),this.ajax.post(l,t).then((t=>{this.list=t.data.map((t=>(t.workTime=_.Z.time("y-m-d",t.workTime),t)))}))}}},y=e(8118);const A=(0,y.Z)(v,[["render",h],["__scopeId","data-v-dd07b02c"]]);var D=A},3701:function(t,l,e){e.r(l),e.d(l,{default:function(){return O}});var a=e(6252),i=e(3577),s=e(2106);const o=t=>((0,a.dD)("data-v-a48b1c4a"),t=t(),(0,a.Cn)(),t),r={class:"stockPut inner"},n={class:"box"},d={class:"head"},u=o((()=>(0,a._)("i",{class:"erp erpfanhui",style:{"font-size":"14px","margin-right":"5px",position:"relative",top:"-1px"}},null,-1))),c=(0,a.Uk)(" 返回 "),p=o((()=>(0,a._)("span",{style:{position:"relative",top:"2px","font-size":"15px"}},"历史种植详情",-1))),g={class:"main"},m={class:"wrap"},w={class:"wrap info"},h={class:"plant"},_=["src"],k=o((()=>(0,a._)("span",null,"面积：",-1))),v=o((()=>(0,a._)("span",null,"产量：",-1))),y=o((()=>(0,a._)("div",{class:"space"},null,-1))),A={class:"time"},D={class:"start"},b=o((()=>(0,a._)("p",null,"开始时间",-1))),f=o((()=>(0,a._)("div",{class:"line"},[(0,a._)("img",{src:s,alt:""})],-1))),C={class:"start"},I=o((()=>(0,a._)("p",null,"结束时间",-1))),z=o((()=>(0,a._)("div",{class:"t"},"历史种植数据：",-1))),T={class:"list"},B={class:"table"},U=o((()=>(0,a._)("div",{class:"tableTitle"},"（采收统计）",-1))),x=o((()=>(0,a._)("div",{class:"tableItem tableHead"},[(0,a._)("p",null,"采收时间"),(0,a._)("p",null,"重量")],-1))),V={class:"tableItems"},W={key:1,class:"tableItem tableAll"},R=o((()=>(0,a._)("p",null,"合计",-1))),q={class:"table"},K=o((()=>(0,a._)("div",{class:"tableTitle"},"（农资使用）",-1))),P=o((()=>(0,a._)("div",{class:"tableItem tableHead"},[(0,a._)("p",null,"类型"),(0,a._)("p",null,"用量")],-1))),j={class:"tableItems"},F=["onClick"],H={class:"table"},E=o((()=>(0,a._)("div",{class:"tableTitle"},"（工时统计）",-1))),N=o((()=>(0,a._)("div",{class:"tableItem tableHead"},[(0,a._)("p",null,"农事类型"),(0,a._)("p",null,"工时（小时）")],-1))),Y={class:"tableItems"},Q=["onClick"],Z={key:1,class:"tableItem tableAll"},L=o((()=>(0,a._)("p",null,"合计",-1)));function S(t,l){const e=(0,a.up)("el-button"),s=(0,a.up)("el-empty"),o=(0,a.up)("PlantCropsDetailCDialog"),S=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",n,[(0,a._)("div",d,[(0,a.Wm)(e,{link:"",type:"primary",onClick:t.back},{default:(0,a.w5)((()=>[u,c])),_:1},8,["onClick"]),p]),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",g,[(0,a._)("div",m,(0,i.zw)(t.detail.categoryTitle),1),(0,a._)("div",w,[(0,a._)("div",h,[(0,a._)("img",{src:t.detail.image,alt:""},null,8,_),(0,a._)("div",null,[(0,a._)("p",null,(0,i.zw)(t.detail.categoryTitle)+"-"+(0,i.zw)(t.detail.varietyTitle)+"-"+(0,i.zw)(t.detail.address),1),(0,a._)("p",null,[k,(0,a.Uk)((0,i.zw)(t.detail.area)+"亩",1)]),(0,a._)("p",null,[v,(0,a.Uk)((0,i.zw)(t.detail.weightAll)+"公斤",1)])])]),y,(0,a._)("div",A,[(0,a._)("div",D,[(0,a._)("p",null,(0,i.zw)(t.detail.plantTime),1),b]),f,(0,a._)("div",C,[(0,a._)("p",null,(0,i.zw)(t.detail.endTime),1),I])])]),z,(0,a._)("div",T,[(0,a._)("div",B,[U,x,(0,a._)("div",V,[0==t.reap.length?((0,a.wg)(),(0,a.j4)(s,{key:0,description:"暂无数据"})):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.reap,((t,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"tableItem",key:l},[(0,a._)("p",null,(0,i.zw)(t.workTime),1),(0,a._)("p",null,(0,i.zw)(t.weightAll||0),1)])))),128)),t.reap.length>0?((0,a.wg)(),(0,a.iD)("div",W,[R,(0,a._)("p",null,(0,i.zw)(t.reapCount),1)])):(0,a.kq)("",!0)])]),(0,a._)("div",q,[K,P,(0,a._)("div",j,[0==t.farmUseBos.length?((0,a.wg)(),(0,a.j4)(s,{key:0,description:"暂无数据"})):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.farmUseBos,((l,e)=>((0,a.wg)(),(0,a.iD)("div",{class:"tableItem",key:e},[(0,a._)("p",null,(0,i.zw)(l.agricultural),1),(0,a._)("p",{style:{color:"#6397fd",cursor:"pointer","text-decoration":"underline"},onClick:e=>t.$store.state.power.agricultureMaterialsBtn?t.showDialogBox("农资使用统计",l.id):()=>{}},(0,i.zw)(l.agriculturalCount||0)+(0,i.zw)(l.agriculturalUnit),9,F)])))),128))])]),(0,a._)("div",H,[E,N,(0,a._)("div",Y,[0==t.farmWorkBos.length?((0,a.wg)(),(0,a.j4)(s,{key:0,description:"暂无数据"})):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.farmWorkBos,((l,e)=>((0,a.wg)(),(0,a.iD)("div",{class:"tableItem",key:e},[(0,a._)("p",null,(0,i.zw)(l.agricultural),1),(0,a._)("p",{style:{color:"#6397fd",cursor:"pointer","text-decoration":"underline"},onClick:e=>t.$store.state.power.workingHoursBtn?t.showDialogBox("工时使用统计",l.id,l.agricultural):()=>{}},(0,i.zw)(l.agriculturalCount||0),9,Q)])))),128)),t.farmWorkBos.length>0?((0,a.wg)(),(0,a.iD)("div",Z,[L,(0,a._)("p",null,(0,i.zw)(t.farmWorkBosCount),1)])):(0,a.kq)("",!0)])])])])),[[S,t.loading]])]),t.showDialog?((0,a.wg)(),(0,a.j4)(o,{key:0,id:t.dialogId,title:t.dialogTitle,title2:t.dialogTitle2,onClose:t.closeDialog},null,8,["id","title","title2","onClose"])):(0,a.kq)("",!0)])}var $=e(2637),G=(e(2335),{name:"stockRecord",data(){return{loading:!1,detail:{},reap:[],farmUseBos:[],farmWorkBos:[],showDialog:!1,dialogTitle:"",dialogTitle2:"",dialogId:""}},components:{PlantCropsDetailCDialog:$.Z},computed:{farmWorkBosCount(){let t=0;return this.farmWorkBos.map((l=>{t+=l.agriculturalCount||0})),t},reapCount(){let t=0;return this.reap.map((l=>{t+=l.weightAll||0})),t}},mounted(){let t=this,l=async function(){t.loading=!0,await t.getData(),await t.getReap(),await t.getStat(),t.loading=!1};l()},methods:{showDialogBox(t,l,e){this.dialogTitle=t,this.dialogTitle2=e,this.dialogId=l,console.log(e),this.showDialog=!0},closeDialog(){this.showDialog=!1},back(){this.$router.push({path:"/erp/plant/history",query:{id:this.$route.query.gardenId}})},getData(){return new Promise(((t,l)=>{this.ajax.post("/api/v1/adam/plants/getPlants",{id:this.$route.query.id}).then((l=>{this.detail=l.data,this.loading=!1,t()}))}))},getReap(){return new Promise(((t,l)=>{this.ajax.post("/api/v1/adam/farm/getFarmRecoveryByPlantsId",{plantsId:this.$route.query.id}).then((l=>{this.reap=l.data,t()}))}))},getStat(){return new Promise(((t,l)=>{this.ajax.post("/api/v1/adam/farm/searchfarmUseRecoveryByPlantsId",{endTime:"",id:this.$route.query.id,keyWord:"",startTime:""}).then((l=>{this.farmUseBos=l.data.farmUseBos,this.farmWorkBos=l.data.farmWorkBos,t()}))}))}}}),J=e(8118);const M=(0,J.Z)(G,[["render",S],["__scopeId","data-v-a48b1c4a"]]);var O=M},2106:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAALCAYAAAA3FnCGAAAAAXNSR0IArs4c6QAAAZpJREFUSEvtlkFOwzAQRX+WHAEFibNwAZa9AwJE2RSxwt0iVCFA7WV6EOAAVGJTCYlVsQeNx07GidP0AM4msWdsz7z5Y6VCeXoEZqvNw+PF8bxrqAqrPoHZ8oscVebpMgVWYGXUIrAAh8osFLACax8sR3CAeb6ufUtWxA8ARulpOsARhTeP47yyxznvH31za9Real9LBPLj/nk27MdRsd06wH+zvwN4Lb/jnKUQu7e18fL+0ZfzkbGON56v8mti6rAgmJebei6w+MAQXAsnAy2bYA6WgqwS3VcEhpJCIHBcAolCohKn922gMdC2UFx0gSI+KTQBK+t1IceEwrKC8bBYYuOQMspKVNhWPw9Fwx9RYUcBHkZQkCgpVayHE8E4gRwV2YDJdEgDfrCbwjlU7RzRdKQNDwMggQ21rLRDkqDyFUUFFQW16P1i6+j9o71VVGzNoDLfKVpxujgp2KGrp1lP2FqLyettvS4X/J4LnggfBHe+uDr59Bd8+c8a+s/C+vdnN1ndn26jR4GVUcvdcvN29P0+NebsT5v/AfJO/di+Ui5TAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=376.297785e3.js.map